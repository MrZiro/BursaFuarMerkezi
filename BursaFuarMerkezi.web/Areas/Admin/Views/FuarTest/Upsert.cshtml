@model FuarTestVM


<div class="container">
    <div class="row pt-4 pb-3">
        <div class="col-12">
            <h2 class="text-primary">
                @(Model.FuarTest.Id == 0 ? "Create" : "Update") Fuar Test
            </h2>
        </div>
    </div>

    <form method="post" enctype="multipart/form-data">
        <input asp-for="FuarTest.Id" hidden />
        <div asp-validation-summary="All" class="text-danger"></div>

        <div class="row mb-3">
            <div class="col-md-8">
                <div class="border p-3 mt-2 mb-3 rounded-2 ">
                    <div class="mb-3">
                        <label asp-for="FuarTest.Title" class="form-label">Title</label>
                        <input asp-for="FuarTest.Title" class="form-control" />
                        <span asp-validation-for="FuarTest.Title" class="text-danger"></span>
                    </div>
                    <div class="mb-3">
                        <label asp-for="FuarTest.Slug" class="form-label">URL Slug</label>
                        <input asp-for="FuarTest.Slug" class="form-control" placeholder="Leave blank to auto-generate" />
                        <span asp-validation-for="FuarTest.Slug" class="text-danger"></span>
                        <div class="form-text">Will be auto-generated from title if left blank.</div>
                    </div>
                </div>
                <!-- Fuar Künyesi (Fair Information) Section -->
                <div class="border p-3 mt-2 mb-3 rounded-2">
                    <h4 class="mb-3">Fuar Künyesi</h4>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label asp-for="FuarTest.StartDate" class="form-label">Başlangıç Tarihi</label>
                            <input asp-for="FuarTest.StartDate" type="date" class="form-control" value="@Model.FuarTest.StartDate.ToString("yyyy-MM-dd")" />
                            <span asp-validation-for="FuarTest.StartDate" class="text-danger"></span>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label asp-for="FuarTest.EndDate" class="form-label">Bitiş Tarihi</label>
                            <input asp-for="FuarTest.EndDate" type="date" class="form-control" value="@Model.FuarTest.EndDate.ToString("yyyy-MM-dd")" />
                            <span asp-validation-for="FuarTest.EndDate" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label asp-for="FuarTest.FairHall" class="form-label">Fuar Salonu</label>
                            <input asp-for="FuarTest.FairHall" class="form-control" />
                            <span asp-validation-for="FuarTest.FairHall" class="text-danger"></span>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label asp-for="FuarTest.VisitingHours" class="form-label">Ziyaret Saatleri</label>
                            <input asp-for="FuarTest.VisitingHours" class="form-control" placeholder="09:30-18:00" />
                            <span asp-validation-for="FuarTest.VisitingHours" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label asp-for="FuarTest.Organizer" class="form-label">Organizatör</label>
                        <input asp-for="FuarTest.Organizer" class="form-control" />
                        <span asp-validation-for="FuarTest.Organizer" class="text-danger"></span>
                    </div>
                    <div class="mb-3">
                        <label asp-for="FuarTest.FairLocation" class="form-label">Fuar Alanı</label>
                        <input asp-for="FuarTest.FairLocation" class="form-control" />
                        <span asp-validation-for="FuarTest.FairLocation" class="text-danger"></span>
                    </div>
                    <div class="mb-3">
                        <label asp-for="FuarTest.WebsiteUrl" class="form-label">Web Sitesi</label>
                        <input asp-for="FuarTest.WebsiteUrl" class="form-control" placeholder="https://risingcity.com.tr" />
                        <span asp-validation-for="FuarTest.WebsiteUrl" class="text-danger"></span>
                    </div>
                </div>

                <div class="border p-3 mt-2 mb-3 rounded-2">
                    <div class="row">
                        <label asp-for="FuarTest.Content" class="form-label"></label>
                        <textarea asp-for="FuarTest.Content" class="form-control Editor"></textarea>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <div class="border p-3 mt-2 rounded-2">
                    @* <div class="mb-3"> *@
                    @*     <label class="form-label">Featured Image</label> *@

                    @*     <div class="dropzone" id="image-dropzone"> *@
                    @*         <input type="file" id="featuredImageInput" asp-for="FeaturedImage" class="d-none" accept=".jpg,.jpeg,.png,.gif,.webp" /> *@
                    @*         <div id="dropzone-content"> *@
                    @*             <i class="bi bi-cloud-arrow-up fs-3"></i> *@
                    @*             <p class="mb-1">Drag and drop an image here, or click to select</p> *@
                    @*             <p class="text-muted small mb-0">Accepted: JPG, JPEG, PNG, GIF, WEBP (Max 5MB)</p> *@
                    @*         </div> *@
                    @*     </div> *@
                    @*     <span asp-validation-for="FeaturedImage" class="text-danger d-block mt-2"></span> *@
                    @* </div> *@

                    <div class="dropzone" id="image-dropzone">
                        @* <input type="file" id="featuredImageInput" asp-for="FeaturedImage" class="" accept=".jpg,.jpeg,.png,.gif,.webp" /> *@
                        @* <span asp-validation-for="FeaturedImage" class="text-danger d-block mt-2"></span> *@
                    </div>
                </div>

                <div class="border p-3 mt-2 rounded-2">
                    <div class="mb-3">
                        <label asp-for="FuarTest.MetaDescription" class="form-label">Meta Description</label>
                        <textarea asp-for="FuarTest.MetaDescription" class="form-control" rows="3"></textarea>
                        <span asp-validation-for="FuarTest.MetaDescription" class="text-danger"></span>
                    </div>
                    <div class="mb-3">
                        <label asp-for="FuarTest.MetaKeywords" class="form-label">Meta Keywords</label>
                        <input asp-for="FuarTest.MetaKeywords" class="form-control" placeholder="Comma-separated keywords" />
                        <span asp-validation-for="FuarTest.MetaKeywords" class="text-danger"></span>
                    </div>
                </div>
                <div class="border p-3 mt-2">
                    <div class="mb-3 form-check">
                        <input asp-for="FuarTest.IsPublished" type="checkbox" class="form-check-input" />
                        <label asp-for="FuarTest.IsPublished" class="form-check-label">Published</label>
                    </div>
                </div>

                <div class="text-end mt-3">
                    <a asp-controller="FuarTest" asp-action="Index" class="btn btn-secondary" style="width:150px">
                        <i class="bi bi-arrow-left"></i> Back to List
                    </a>
                    <button type="submit" class="btn btn-primary" style="width:150px">
                        <i class="bi bi-save"></i> @(Model.FuarTest.Id == 0 ? "Create" : "Update")
                    </button>
                </div>
            </div>
        </div>
    </form>
</div>


@section Scripts{
    @{
        <script src="https://cdn.tiny.cloud/1/ksmksgnd1ppn1dd8gfjy1rhu22ru4v191js89isjbbf27fnm/tinymce/7/tinymce.min.js" referrerpolicy="origin"></script>
        <script src="~/admin/scripts/Editor.js"></script>
        <partial name="_ValidationScriptsPartial" />
    }
    <script>
        // Auto-generate slug from title if slug is empty
        $('#FuarTest_Title').change(function () {
            // Convert title to slug format
            var slug = $(this).val().toLowerCase()
                .replace(/[^\w\s-]/g, '') // Remove special characters
                .replace(/\s+/g, '-')     // Replace spaces with hyphens
                .replace(/-+/g, '-');     // Replace multiple hyphens with single hyphen

            $('#FuarTest_Slug').val(slug);
        });
    </script>
}